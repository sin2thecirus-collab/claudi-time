{# Tab "Archiv" â€” Blacklist, Verloren, Followup abgeschlossen #}

{% if groups and groups | length > 0 %}
<div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
    <span style="font-size:22px;font-weight:700;color:var(--pp-text);">{{ total }}</span>
    <span style="font-size:13px;color:var(--pp-textMuted);">archivierte Leads</span>
</div>

{% for group in groups %}
<div style="background:var(--pp-surface);border:1px solid var(--pp-border);border-radius:10px;margin-bottom:10px;overflow:hidden;opacity:0.75;">
    <div style="padding:12px 16px;background:var(--pp-bg);border-bottom:1px solid var(--pp-border);display:flex;align-items:center;justify-content:space-between;cursor:pointer;"
         onclick="this.nextElementSibling.style.display = this.nextElementSibling.style.display === 'none' ? 'block' : 'none'">
        <div style="display:flex;align-items:center;gap:8px;">
            <span style="font-size:14px;font-weight:600;color:var(--pp-text);">{{ group.company_name }}</span>
            <span style="font-size:12px;color:var(--pp-textDim);">{{ group.city or '' }}</span>
            {% if group.company_status == 'blacklist' %}
            <span style="padding:1px 8px;border-radius:4px;font-size:10px;font-weight:700;background:rgba(239,68,68,0.15);color:var(--pp-red);">BLACKLIST</span>
            {% endif %}
        </div>
        <svg style="width:14px;height:14px;color:var(--pp-textDim);" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"/></svg>
    </div>
    <div style="display:none;">
        {% for job in group.jobs %}
        <div style="padding:10px 16px;border-bottom:1px solid var(--pp-border);display:flex;align-items:center;justify-content:space-between;">
            <div style="display:flex;align-items:center;gap:10px;">
                {% set status_styles = {
                    'blacklist_hart': 'background:rgba(239,68,68,0.2);color:var(--pp-red);',
                    'blacklist_weich': 'background:rgba(239,68,68,0.1);color:#f87171;',
                    'verloren': 'background:var(--pp-surface3);color:var(--pp-textDim);',
                    'followup_abgeschlossen': 'background:var(--pp-surface3);color:var(--pp-textDim);',
                } %}
                <span style="display:inline-block;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600;{{ status_styles.get(job.akquise_status, 'background:var(--pp-surface3);color:var(--pp-textDim);') }}">
                    {{ job.akquise_status }}
                </span>
                <span style="font-size:13px;color:var(--pp-textMuted);">{{ job.position }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}

{% if pages > 1 %}
{% include 'partials/akquise/pagination.html' %}
{% endif %}

{% else %}
<div style="text-align:center;padding:60px 0;">
    <p style="font-size:15px;font-weight:500;color:var(--pp-textMuted);margin:0;">Archiv ist leer</p>
    <p style="font-size:13px;color:var(--pp-textDim);margin:6px 0 0;">Abgeschlossene und abgelehnte Leads erscheinen hier</p>
</div>
{% endif %}
