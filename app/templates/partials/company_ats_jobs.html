{# Partial: ATS-Stellen eines Unternehmens — Dark Theme #}

{% if ats_jobs and ats_jobs | length > 0 %}
<div style="display:flex; flex-direction:column; gap:8px;">
    {% for job in ats_jobs %}
    <a href="/ats/stellen/{{ job.id }}" style="display:block; padding:14px 16px; background:var(--pp-surface); border:1px solid var(--pp-border); border-radius:10px; text-decoration:none; transition:all 0.15s;"
       onmouseover="this.style.background='var(--pp-surfaceHover)'; this.style.borderColor='var(--pp-borderLight)';"
       onmouseout="this.style.background='var(--pp-surface)'; this.style.borderColor='var(--pp-border)';">
        <div style="display:flex; align-items:center; justify-content:space-between;">
            <span style="font-size:15px; font-weight:600; color:var(--pp-text); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">{{ job.title }}</span>
            {% if job.in_pipeline %}
            <span style="font-size:12px; font-weight:600; color:var(--pp-accent); background:var(--pp-accentSoft); padding:2px 8px; border-radius:5px;">Pipeline</span>
            {% endif %}
        </div>
        <div style="display:flex; align-items:center; gap:8px; margin-top:5px; font-size:13px; color:var(--pp-textMuted);">
            {% if job.location_city %}<span>{{ job.location_city }}</span>{% endif %}
            {% if job.employment_type %}<span style="color:var(--pp-textDim);">· {{ job.employment_type }}</span>{% endif %}
            <span style="color:var(--pp-textDim);">·</span>
            {% if job.status.value == 'open' %}
            <span style="color:var(--pp-green); font-weight:600;">Offen</span>
            {% elif job.status.value == 'paused' %}
            <span style="color:var(--pp-orange); font-weight:600;">Pausiert</span>
            {% elif job.status.value == 'filled' %}
            <span style="color:var(--pp-accent); font-weight:600;">Besetzt</span>
            {% else %}
            <span style="color:var(--pp-textDim); font-weight:600;">Abgesagt</span>
            {% endif %}
            {% set pipeline_count = job.pipeline_entries | length if job.pipeline_entries else 0 %}
            {% if pipeline_count > 0 %}
            <span style="color:var(--pp-textDim);">·</span>
            <span>{{ pipeline_count }} Kandidat{{ 'en' if pipeline_count != 1 else '' }}</span>
            {% endif %}
        </div>
    </a>
    {% endfor %}
    {% if ats_jobs | length >= 50 %}
    <p style="font-size:12px; color:var(--pp-textDim); text-align:center; padding-top:8px;">Zeigt max. 50 ATS-Stellen</p>
    {% endif %}
</div>
{% else %}
<div class="cd-side-empty">
    <div class="cd-side-empty-text">Keine ATS-Stellen verknüpft</div>
    <a href="/ats/stellen" class="cd-side-empty-link">+ Zu ATS-Stellen</a>
</div>
{% endif %}
