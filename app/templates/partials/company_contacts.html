{# Partial: Kontakte eines Unternehmens â€” Dark Theme Grid-Karten #}

{% set contact_colors = ['#4F8CFF', '#A78BFA', '#34D399', '#F59E0B', '#EF4444'] %}

{% if contacts and contacts | length > 0 %}
<div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(210px, 1fr)); gap:10px;">
    {% for contact in contacts %}
    {% set ccolor = contact_colors[loop.index0 % 5] %}
    <div style="background:var(--pp-surface); border:1px solid var(--pp-border); border-radius:12px; padding:14px; transition:all 0.2s ease; cursor:pointer; min-width:0; position:relative;"
         onmouseover="this.style.background='var(--pp-surfaceHover)'; this.style.borderColor='var(--pp-borderLight)';"
         onmouseout="this.style.background='var(--pp-surface)'; this.style.borderColor='var(--pp-border)';">

        {# Delete Button #}
        <button onclick="event.stopPropagation(); deleteContact('{{ contact.id }}')"
                style="position:absolute; top:8px; right:8px; width:22px; height:22px; border-radius:6px; border:none; background:transparent; color:var(--pp-textDim); cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:12px; opacity:0; transition:all 0.15s;"
                onmouseover="this.style.opacity='1'; this.style.color='var(--pp-red)'; this.style.background='var(--pp-redSoft)';"
                onmouseout="this.style.opacity='0'; this.style.color='var(--pp-textDim)'; this.style.background='transparent';"
                title="LÃ¶schen">âœ•</button>

        {# Header: Avatar + Name #}
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:12px;">
            <div style="width:34px; height:34px; border-radius:10px; flex-shrink:0;
                        background:linear-gradient(135deg, {{ ccolor }}22, {{ ccolor }}44);
                        border:1px solid {{ ccolor }}44;
                        display:flex; align-items:center; justify-content:center;
                        font-size:12px; font-weight:600; color:{{ ccolor }}; letter-spacing:0.02em;">
                {{ (contact.first_name or '?')[0] }}{{ (contact.last_name or '?')[0] }}
            </div>
            <div style="min-width:0;">
                <a href="/kontakte/{{ contact.id }}" onclick="event.stopPropagation();"
                   style="font-size:13px; font-weight:600; color:var(--pp-text); text-decoration:none; display:block; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                    {{ contact.full_name }}
                </a>
                <div style="font-size:11px; color:var(--pp-textMuted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                    {{ contact.position or 'â€”' }}{% if contact.city %} Â· {{ contact.city }}{% endif %}
                </div>
            </div>
        </div>

        {# Kontaktdaten #}
        <div style="display:flex; flex-direction:column; gap:6px;">
            <div style="display:flex; align-items:center; gap:7px; font-size:11.5px; color:{% if contact.phone %}var(--pp-textMuted){% else %}var(--pp-textDim){% endif %};">
                <span style="font-size:12px; opacity:0.6;">ğŸ“</span>
                <span style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">{% if contact.phone %}<a href="tel:{{ contact.phone }}" onclick="event.stopPropagation();" style="color:inherit; text-decoration:none;">{{ contact.phone }}</a>{% else %}â€”{% endif %}</span>
            </div>
            <div style="display:flex; align-items:center; gap:7px; font-size:11.5px; color:{% if contact.email %}var(--pp-textMuted){% else %}var(--pp-textDim){% endif %};">
                <span style="font-size:12px; opacity:0.6;">âœ‰ï¸</span>
                <span style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">{% if contact.email %}<a href="mailto:{{ contact.email }}" onclick="event.stopPropagation();" style="color:inherit; text-decoration:none;">{{ contact.email }}</a>{% else %}â€”{% endif %}</span>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p style="font-size:11px; color:var(--pp-textDim);">Keine Ansprechpartner vorhanden</p>
{% endif %}
